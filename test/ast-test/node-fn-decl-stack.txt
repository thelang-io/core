======= stdin =======
obj Test {
  a: int
}

fn job () int {
  return 2
}

main {
  a := 0
  b := 1
  c := "str"

  fn test () int {
    t := Test{a: a + 1}
    return t.a + job() + c.len
  }

  b + test()
}
======= stdout =======
<Node>
  <NodeObjDecl>
    <TypeObj codeName="Test_0" name="Test">
      <TypeObjField name="a">
        <BuiltinType name="int" />
      </TypeObjField>
    </TypeObj>
  </NodeObjDecl>
</Node>
<Node>
  <NodeFnDecl>
    <slot name="var">
      <Var codeName="job_0" frame="1" name="job">
        <TypeFn codeName="job_0" name="fn$0">
          <slot name="returnType">
            <BuiltinType name="int" />
          </slot>
        </TypeFn>
      </Var>
    </slot>
    <slot name="body">
      <Node>
        <NodeReturn>
          <NodeExpr>
            <slot name="type">
              <BuiltinType name="int" />
            </slot>
            <slot name="body">
              <ExprLit type="INT_DEC">
                2
              </ExprLit>
            </slot>
          </NodeExpr>
        </NodeReturn>
      </Node>
    </slot>
  </NodeFnDecl>
</Node>
<Node>
  <NodeMain>
    <Node>
      <NodeVarDecl>
        <slot name="var">
          <Var codeName="a_0" frame="2" name="a">
            <BuiltinType name="int" />
          </Var>
        </slot>
        <slot name="init">
          <NodeExpr>
            <slot name="type">
              <BuiltinType name="int" />
            </slot>
            <slot name="body">
              <ExprLit type="INT_DEC">
                0
              </ExprLit>
            </slot>
          </NodeExpr>
        </slot>
      </NodeVarDecl>
    </Node>
    <Node>
      <NodeVarDecl>
        <slot name="var">
          <Var codeName="b_0" frame="2" name="b">
            <BuiltinType name="int" />
          </Var>
        </slot>
        <slot name="init">
          <NodeExpr>
            <slot name="type">
              <BuiltinType name="int" />
            </slot>
            <slot name="body">
              <ExprLit type="INT_DEC">
                1
              </ExprLit>
            </slot>
          </NodeExpr>
        </slot>
      </NodeVarDecl>
    </Node>
    <Node>
      <NodeVarDecl>
        <slot name="var">
          <Var codeName="c_0" frame="2" name="c">
            <BuiltinType name="str" />
          </Var>
        </slot>
        <slot name="init">
          <NodeExpr>
            <slot name="type">
              <BuiltinType name="str" />
            </slot>
            <slot name="body">
              <ExprLit type="STR">
                "str"
              </ExprLit>
            </slot>
          </NodeExpr>
        </slot>
      </NodeVarDecl>
    </Node>
    <Node>
      <NodeFnDecl>
        <slot name="var">
          <Var codeName="mainSDtest_0" frame="2" name="test">
            <TypeFn codeName="mainSDtest_0" name="fn$0">
              <slot name="returnType">
                <BuiltinType name="int" />
              </slot>
            </TypeFn>
          </Var>
        </slot>
        <slot name="stack">
          <Var codeName="c_0" frame="2" name="c">
            <BuiltinType name="str" />
          </Var>
          <Var codeName="a_0" frame="2" name="a">
            <BuiltinType name="int" />
          </Var>
          <Var codeName="job_0" frame="1" name="job">
            <TypeFn codeName="job_0" name="fn$0">
              <slot name="returnType">
                <BuiltinType name="int" />
              </slot>
            </TypeFn>
          </Var>
        </slot>
        <slot name="body">
          <Node>
            <NodeVarDecl>
              <slot name="var">
                <Var codeName="t_0" frame="3" name="t">
                  <TypeObj codeName="Test_0" name="Test">
                    <TypeObjField name="a">
                      <BuiltinType name="int" />
                    </TypeObjField>
                  </TypeObj>
                </Var>
              </slot>
              <slot name="init">
                <NodeExpr>
                  <slot name="type">
                    <TypeObj codeName="Test_0" name="Test">
                      <TypeObjField name="a">
                        <BuiltinType name="int" />
                      </TypeObjField>
                    </TypeObj>
                  </slot>
                  <slot name="body">
                    <ExprObj>
                      <slot name="type">
                        <TypeObj codeName="Test_0" name="Test">
                          <TypeObjField name="a">
                            <BuiltinType name="int" />
                          </TypeObjField>
                        </TypeObj>
                      </slot>
                      <slot name="props">
                        <ExprObjProp>
                          <slot name="id">
                            a
                          </slot>
                          <slot name="init">
                            <NodeExpr>
                              <slot name="type">
                                <BuiltinType name="int" />
                              </slot>
                              <slot name="body">
                                <ExprBinary op="ADD">
                                  <slot name="left">
                                    <NodeExpr>
                                      <slot name="type">
                                        <BuiltinType name="int" />
                                      </slot>
                                      <slot name="body">
                                        <ExprAccess>
                                          <Var codeName="a_0" frame="2" name="a">
                                            <BuiltinType name="int" />
                                          </Var>
                                        </ExprAccess>
                                      </slot>
                                    </NodeExpr>
                                  </slot>
                                  <slot name="right">
                                    <NodeExpr>
                                      <slot name="type">
                                        <BuiltinType name="int" />
                                      </slot>
                                      <slot name="body">
                                        <ExprLit type="INT_DEC">
                                          1
                                        </ExprLit>
                                      </slot>
                                    </NodeExpr>
                                  </slot>
                                </ExprBinary>
                              </slot>
                            </NodeExpr>
                          </slot>
                        </ExprObjProp>
                      </slot>
                    </ExprObj>
                  </slot>
                </NodeExpr>
              </slot>
            </NodeVarDecl>
          </Node>
          <Node>
            <NodeReturn>
              <NodeExpr>
                <slot name="type">
                  <BuiltinType name="int" />
                </slot>
                <slot name="body">
                  <ExprBinary op="ADD">
                    <slot name="left">
                      <NodeExpr>
                        <slot name="type">
                          <BuiltinType name="int" />
                        </slot>
                        <slot name="body">
                          <ExprBinary op="ADD">
                            <slot name="left">
                              <NodeExpr>
                                <slot name="type">
                                  <BuiltinType name="int" />
                                </slot>
                                <slot name="body">
                                  <ExprAccess prop="a">
                                    <NodeExpr>
                                      <slot name="type">
                                        <TypeObj codeName="Test_0" name="Test">
                                          <TypeObjField name="a">
                                            <BuiltinType name="int" />
                                          </TypeObjField>
                                        </TypeObj>
                                      </slot>
                                      <slot name="body">
                                        <ExprAccess>
                                          <Var codeName="t_0" frame="3" name="t">
                                            <TypeObj codeName="Test_0" name="Test">
                                              <TypeObjField name="a">
                                                <BuiltinType name="int" />
                                              </TypeObjField>
                                            </TypeObj>
                                          </Var>
                                        </ExprAccess>
                                      </slot>
                                    </NodeExpr>
                                  </ExprAccess>
                                </slot>
                              </NodeExpr>
                            </slot>
                            <slot name="right">
                              <NodeExpr>
                                <slot name="type">
                                  <BuiltinType name="int" />
                                </slot>
                                <slot name="body">
                                  <ExprCall>
                                    <slot name="callee">
                                      <NodeExpr>
                                        <slot name="type">
                                          <TypeFn codeName="job_0" name="fn$0">
                                            <slot name="returnType">
                                              <BuiltinType name="int" />
                                            </slot>
                                          </TypeFn>
                                        </slot>
                                        <slot name="body">
                                          <ExprAccess>
                                            <Var codeName="job_0" frame="1" name="job">
                                              <TypeFn codeName="job_0" name="fn$0">
                                                <slot name="returnType">
                                                  <BuiltinType name="int" />
                                                </slot>
                                              </TypeFn>
                                            </Var>
                                          </ExprAccess>
                                        </slot>
                                      </NodeExpr>
                                    </slot>
                                    <slot name="calleeType">
                                      <TypeFn codeName="job_0" name="fn$0">
                                        <slot name="returnType">
                                          <BuiltinType name="int" />
                                        </slot>
                                      </TypeFn>
                                    </slot>
                                  </ExprCall>
                                </slot>
                              </NodeExpr>
                            </slot>
                          </ExprBinary>
                        </slot>
                      </NodeExpr>
                    </slot>
                    <slot name="right">
                      <NodeExpr>
                        <slot name="type">
                          <BuiltinType name="int" />
                        </slot>
                        <slot name="body">
                          <ExprAccess prop="len">
                            <NodeExpr>
                              <slot name="type">
                                <BuiltinType name="str" />
                              </slot>
                              <slot name="body">
                                <ExprAccess>
                                  <Var codeName="c_0" frame="2" name="c">
                                    <BuiltinType name="str" />
                                  </Var>
                                </ExprAccess>
                              </slot>
                            </NodeExpr>
                          </ExprAccess>
                        </slot>
                      </NodeExpr>
                    </slot>
                  </ExprBinary>
                </slot>
              </NodeExpr>
            </NodeReturn>
          </Node>
        </slot>
      </NodeFnDecl>
    </Node>
    <Node>
      <NodeExpr>
        <slot name="type">
          <BuiltinType name="int" />
        </slot>
        <slot name="body">
          <ExprBinary op="ADD">
            <slot name="left">
              <NodeExpr>
                <slot name="type">
                  <BuiltinType name="int" />
                </slot>
                <slot name="body">
                  <ExprAccess>
                    <Var codeName="b_0" frame="2" name="b">
                      <BuiltinType name="int" />
                    </Var>
                  </ExprAccess>
                </slot>
              </NodeExpr>
            </slot>
            <slot name="right">
              <NodeExpr>
                <slot name="type">
                  <BuiltinType name="int" />
                </slot>
                <slot name="body">
                  <ExprCall>
                    <slot name="callee">
                      <NodeExpr>
                        <slot name="type">
                          <TypeFn codeName="mainSDtest_0" name="fn$0">
                            <slot name="returnType">
                              <BuiltinType name="int" />
                            </slot>
                          </TypeFn>
                        </slot>
                        <slot name="body">
                          <ExprAccess>
                            <Var codeName="mainSDtest_0" frame="2" name="test">
                              <TypeFn codeName="mainSDtest_0" name="fn$0">
                                <slot name="returnType">
                                  <BuiltinType name="int" />
                                </slot>
                              </TypeFn>
                            </Var>
                          </ExprAccess>
                        </slot>
                      </NodeExpr>
                    </slot>
                    <slot name="calleeType">
                      <TypeFn codeName="mainSDtest_0" name="fn$0">
                        <slot name="returnType">
                          <BuiltinType name="int" />
                        </slot>
                      </TypeFn>
                    </slot>
                  </ExprCall>
                </slot>
              </NodeExpr>
            </slot>
          </ExprBinary>
        </slot>
      </NodeExpr>
    </Node>
  </NodeMain>
</Node>

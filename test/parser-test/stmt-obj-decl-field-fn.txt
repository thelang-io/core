======= stdin =======
obj Test1 {
  a: fn () void
}

obj Test2 {
  b: fn (int, int...) int
}

fn t1 () {
  print("Hello, World!")
}

fn t2 (a: int, b: int...) int {
  print(b)
  return a
}

main {
  test1 := Test1{a: t1}
  test2 := Test2{b: t2}

  test1.a()
  print("1 =", test1.b(1))
  print("1, 2 =", test1.b(1, 2))
  print("1, 2, 3 =", test1.b(1, 2, 3))
  print("1, 2, 3, 4 =", test1.b(1, 2, 3, 4))
}
======= stdout =======
<Stmt start="1:1" end="3:2">
  <StmtObjDecl>
    <slot name="id">
      <Token type="ID" val="Test1" start="1:5" end="1:10" />
    </slot>
    <slot name="fields">
      <StmtObjDeclField>
        <slot name="id">
          <Token type="ID" val="a" start="2:3" end="2:4" />
        </slot>
        <slot name="type">
          <Type parenthesized="false" start="2:6" end="2:16">
            <TypeFn>
              <slot name="returnType">
                <Type parenthesized="false" start="2:12" end="2:16">
                  <TypeId>
                    <Token type="ID" val="void" start="2:12" end="2:16" />
                  </TypeId>
                </Type>
              </slot>
            </TypeFn>
          </Type>
        </slot>
      </StmtObjDeclField>
    </slot>
  </StmtObjDecl>
</Stmt>
<Stmt start="5:1" end="7:2">
  <StmtObjDecl>
    <slot name="id">
      <Token type="ID" val="Test2" start="5:5" end="5:10" />
    </slot>
    <slot name="fields">
      <StmtObjDeclField>
        <slot name="id">
          <Token type="ID" val="b" start="6:3" end="6:4" />
        </slot>
        <slot name="type">
          <Type parenthesized="false" start="6:6" end="6:26">
            <TypeFn>
              <slot name="params">
                <TypeFnParam variadic="false">
                  <Type parenthesized="false" start="6:10" end="6:13">
                    <TypeId>
                      <Token type="ID" val="int" start="6:10" end="6:13" />
                    </TypeId>
                  </Type>
                </TypeFnParam>
                <TypeFnParam variadic="true">
                  <Type parenthesized="false" start="6:15" end="6:18">
                    <TypeId>
                      <Token type="ID" val="int" start="6:15" end="6:18" />
                    </TypeId>
                  </Type>
                </TypeFnParam>
              </slot>
              <slot name="returnType">
                <Type parenthesized="false" start="6:23" end="6:26">
                  <TypeId>
                    <Token type="ID" val="int" start="6:23" end="6:26" />
                  </TypeId>
                </Type>
              </slot>
            </TypeFn>
          </Type>
        </slot>
      </StmtObjDeclField>
    </slot>
  </StmtObjDecl>
</Stmt>
<Stmt start="9:1" end="11:2">
  <StmtFnDecl>
    <slot name="id">
      <Token type="ID" val="t1" start="9:4" end="9:6" />
    </slot>
    <slot name="body">
      <Stmt start="10:3" end="10:25">
        <StmtExpr parenthesized="false">
          <ExprCall>
            <slot name="callee">
              <Token type="ID" val="print" start="10:3" end="10:8" />
            </slot>
            <slot name="args">
              <ExprCallArg>
                <slot name="expr">
                  <StmtExpr parenthesized="false">
                    <ExprLit>
                      <Token type="LIT_STR" val="\"Hello, World!\"" start="10:9" end="10:24" />
                    </ExprLit>
                  </StmtExpr>
                </slot>
              </ExprCallArg>
            </slot>
          </ExprCall>
        </StmtExpr>
      </Stmt>
    </slot>
  </StmtFnDecl>
</Stmt>
<Stmt start="13:1" end="16:2">
  <StmtFnDecl>
    <slot name="id">
      <Token type="ID" val="t2" start="13:4" end="13:6" />
    </slot>
    <slot name="params">
      <StmtFnDeclParam variadic="false">
        <slot name="id">
          <Token type="ID" val="a" start="13:8" end="13:9" />
        </slot>
        <slot name="type">
          <Type parenthesized="false" start="13:11" end="13:14">
            <TypeId>
              <Token type="ID" val="int" start="13:11" end="13:14" />
            </TypeId>
          </Type>
        </slot>
      </StmtFnDeclParam>
      <StmtFnDeclParam variadic="true">
        <slot name="id">
          <Token type="ID" val="b" start="13:16" end="13:17" />
        </slot>
        <slot name="type">
          <Type parenthesized="false" start="13:19" end="13:22">
            <TypeId>
              <Token type="ID" val="int" start="13:19" end="13:22" />
            </TypeId>
          </Type>
        </slot>
      </StmtFnDeclParam>
    </slot>
    <slot name="returnType">
      <Type parenthesized="false" start="13:27" end="13:30">
        <TypeId>
          <Token type="ID" val="int" start="13:27" end="13:30" />
        </TypeId>
      </Type>
    </slot>
    <slot name="body">
      <Stmt start="14:3" end="14:11">
        <StmtExpr parenthesized="false">
          <ExprCall>
            <slot name="callee">
              <Token type="ID" val="print" start="14:3" end="14:8" />
            </slot>
            <slot name="args">
              <ExprCallArg>
                <slot name="expr">
                  <StmtExpr parenthesized="false">
                    <ExprAccess>
                      <Token type="ID" val="b" start="14:9" end="14:10" />
                    </ExprAccess>
                  </StmtExpr>
                </slot>
              </ExprCallArg>
            </slot>
          </ExprCall>
        </StmtExpr>
      </Stmt>
      <Stmt start="15:3" end="15:11">
        <StmtReturn>
          <StmtExpr parenthesized="false">
            <ExprAccess>
              <Token type="ID" val="a" start="15:10" end="15:11" />
            </ExprAccess>
          </StmtExpr>
        </StmtReturn>
      </Stmt>
    </slot>
  </StmtFnDecl>
</Stmt>
<Stmt start="18:1" end="27:2">
  <StmtMain>
    <Stmt start="19:3" end="19:24">
      <StmtVarDecl mut="false">
        <slot name="id">
          <Token type="ID" val="test1" start="19:3" end="19:8" />
        </slot>
        <slot name="init">
          <StmtExpr parenthesized="false">
            <ExprObj>
              <slot name="id">
                <Token type="ID" val="Test1" start="19:12" end="19:17" />
              </slot>
              <slot name="props">
                <ExprObjProp>
                  <slot name="id">
                    <Token type="ID" val="a" start="19:18" end="19:19" />
                  </slot>
                  <slot name="init">
                    <StmtExpr parenthesized="false">
                      <ExprAccess>
                        <Token type="ID" val="t1" start="19:21" end="19:23" />
                      </ExprAccess>
                    </StmtExpr>
                  </slot>
                </ExprObjProp>
              </slot>
            </ExprObj>
          </StmtExpr>
        </slot>
      </StmtVarDecl>
    </Stmt>
    <Stmt start="20:3" end="20:24">
      <StmtVarDecl mut="false">
        <slot name="id">
          <Token type="ID" val="test2" start="20:3" end="20:8" />
        </slot>
        <slot name="init">
          <StmtExpr parenthesized="false">
            <ExprObj>
              <slot name="id">
                <Token type="ID" val="Test2" start="20:12" end="20:17" />
              </slot>
              <slot name="props">
                <ExprObjProp>
                  <slot name="id">
                    <Token type="ID" val="b" start="20:18" end="20:19" />
                  </slot>
                  <slot name="init">
                    <StmtExpr parenthesized="false">
                      <ExprAccess>
                        <Token type="ID" val="t2" start="20:21" end="20:23" />
                      </ExprAccess>
                    </StmtExpr>
                  </slot>
                </ExprObjProp>
              </slot>
            </ExprObj>
          </StmtExpr>
        </slot>
      </StmtVarDecl>
    </Stmt>
    <Stmt start="22:3" end="22:12">
      <StmtExpr parenthesized="false">
        <ExprCall>
          <slot name="callee">
            <slot name="obj">
              <Token type="ID" val="test1" start="22:3" end="22:8" />
            </slot>
            <slot name="prop">
              <Token type="ID" val="a" start="22:9" end="22:10" />
            </slot>
          </slot>
        </ExprCall>
      </StmtExpr>
    </Stmt>
    <Stmt start="23:3" end="23:27">
      <StmtExpr parenthesized="false">
        <ExprCall>
          <slot name="callee">
            <Token type="ID" val="print" start="23:3" end="23:8" />
          </slot>
          <slot name="args">
            <ExprCallArg>
              <slot name="expr">
                <StmtExpr parenthesized="false">
                  <ExprLit>
                    <Token type="LIT_STR" val="\"1 =\"" start="23:9" end="23:14" />
                  </ExprLit>
                </StmtExpr>
              </slot>
            </ExprCallArg>
            <ExprCallArg>
              <slot name="expr">
                <StmtExpr parenthesized="false">
                  <ExprCall>
                    <slot name="callee">
                      <slot name="obj">
                        <Token type="ID" val="test1" start="23:16" end="23:21" />
                      </slot>
                      <slot name="prop">
                        <Token type="ID" val="b" start="23:22" end="23:23" />
                      </slot>
                    </slot>
                    <slot name="args">
                      <ExprCallArg>
                        <slot name="expr">
                          <StmtExpr parenthesized="false">
                            <ExprLit>
                              <Token type="LIT_INT_DEC" val="1" start="23:24" end="23:25" />
                            </ExprLit>
                          </StmtExpr>
                        </slot>
                      </ExprCallArg>
                    </slot>
                  </ExprCall>
                </StmtExpr>
              </slot>
            </ExprCallArg>
          </slot>
        </ExprCall>
      </StmtExpr>
    </Stmt>
    <Stmt start="24:3" end="24:33">
      <StmtExpr parenthesized="false">
        <ExprCall>
          <slot name="callee">
            <Token type="ID" val="print" start="24:3" end="24:8" />
          </slot>
          <slot name="args">
            <ExprCallArg>
              <slot name="expr">
                <StmtExpr parenthesized="false">
                  <ExprLit>
                    <Token type="LIT_STR" val="\"1, 2 =\"" start="24:9" end="24:17" />
                  </ExprLit>
                </StmtExpr>
              </slot>
            </ExprCallArg>
            <ExprCallArg>
              <slot name="expr">
                <StmtExpr parenthesized="false">
                  <ExprCall>
                    <slot name="callee">
                      <slot name="obj">
                        <Token type="ID" val="test1" start="24:19" end="24:24" />
                      </slot>
                      <slot name="prop">
                        <Token type="ID" val="b" start="24:25" end="24:26" />
                      </slot>
                    </slot>
                    <slot name="args">
                      <ExprCallArg>
                        <slot name="expr">
                          <StmtExpr parenthesized="false">
                            <ExprLit>
                              <Token type="LIT_INT_DEC" val="1" start="24:27" end="24:28" />
                            </ExprLit>
                          </StmtExpr>
                        </slot>
                      </ExprCallArg>
                      <ExprCallArg>
                        <slot name="expr">
                          <StmtExpr parenthesized="false">
                            <ExprLit>
                              <Token type="LIT_INT_DEC" val="2" start="24:30" end="24:31" />
                            </ExprLit>
                          </StmtExpr>
                        </slot>
                      </ExprCallArg>
                    </slot>
                  </ExprCall>
                </StmtExpr>
              </slot>
            </ExprCallArg>
          </slot>
        </ExprCall>
      </StmtExpr>
    </Stmt>
    <Stmt start="25:3" end="25:39">
      <StmtExpr parenthesized="false">
        <ExprCall>
          <slot name="callee">
            <Token type="ID" val="print" start="25:3" end="25:8" />
          </slot>
          <slot name="args">
            <ExprCallArg>
              <slot name="expr">
                <StmtExpr parenthesized="false">
                  <ExprLit>
                    <Token type="LIT_STR" val="\"1, 2, 3 =\"" start="25:9" end="25:20" />
                  </ExprLit>
                </StmtExpr>
              </slot>
            </ExprCallArg>
            <ExprCallArg>
              <slot name="expr">
                <StmtExpr parenthesized="false">
                  <ExprCall>
                    <slot name="callee">
                      <slot name="obj">
                        <Token type="ID" val="test1" start="25:22" end="25:27" />
                      </slot>
                      <slot name="prop">
                        <Token type="ID" val="b" start="25:28" end="25:29" />
                      </slot>
                    </slot>
                    <slot name="args">
                      <ExprCallArg>
                        <slot name="expr">
                          <StmtExpr parenthesized="false">
                            <ExprLit>
                              <Token type="LIT_INT_DEC" val="1" start="25:30" end="25:31" />
                            </ExprLit>
                          </StmtExpr>
                        </slot>
                      </ExprCallArg>
                      <ExprCallArg>
                        <slot name="expr">
                          <StmtExpr parenthesized="false">
                            <ExprLit>
                              <Token type="LIT_INT_DEC" val="2" start="25:33" end="25:34" />
                            </ExprLit>
                          </StmtExpr>
                        </slot>
                      </ExprCallArg>
                      <ExprCallArg>
                        <slot name="expr">
                          <StmtExpr parenthesized="false">
                            <ExprLit>
                              <Token type="LIT_INT_DEC" val="3" start="25:36" end="25:37" />
                            </ExprLit>
                          </StmtExpr>
                        </slot>
                      </ExprCallArg>
                    </slot>
                  </ExprCall>
                </StmtExpr>
              </slot>
            </ExprCallArg>
          </slot>
        </ExprCall>
      </StmtExpr>
    </Stmt>
    <Stmt start="26:3" end="26:45">
      <StmtExpr parenthesized="false">
        <ExprCall>
          <slot name="callee">
            <Token type="ID" val="print" start="26:3" end="26:8" />
          </slot>
          <slot name="args">
            <ExprCallArg>
              <slot name="expr">
                <StmtExpr parenthesized="false">
                  <ExprLit>
                    <Token type="LIT_STR" val="\"1, 2, 3, 4 =\"" start="26:9" end="26:23" />
                  </ExprLit>
                </StmtExpr>
              </slot>
            </ExprCallArg>
            <ExprCallArg>
              <slot name="expr">
                <StmtExpr parenthesized="false">
                  <ExprCall>
                    <slot name="callee">
                      <slot name="obj">
                        <Token type="ID" val="test1" start="26:25" end="26:30" />
                      </slot>
                      <slot name="prop">
                        <Token type="ID" val="b" start="26:31" end="26:32" />
                      </slot>
                    </slot>
                    <slot name="args">
                      <ExprCallArg>
                        <slot name="expr">
                          <StmtExpr parenthesized="false">
                            <ExprLit>
                              <Token type="LIT_INT_DEC" val="1" start="26:33" end="26:34" />
                            </ExprLit>
                          </StmtExpr>
                        </slot>
                      </ExprCallArg>
                      <ExprCallArg>
                        <slot name="expr">
                          <StmtExpr parenthesized="false">
                            <ExprLit>
                              <Token type="LIT_INT_DEC" val="2" start="26:36" end="26:37" />
                            </ExprLit>
                          </StmtExpr>
                        </slot>
                      </ExprCallArg>
                      <ExprCallArg>
                        <slot name="expr">
                          <StmtExpr parenthesized="false">
                            <ExprLit>
                              <Token type="LIT_INT_DEC" val="3" start="26:39" end="26:40" />
                            </ExprLit>
                          </StmtExpr>
                        </slot>
                      </ExprCallArg>
                      <ExprCallArg>
                        <slot name="expr">
                          <StmtExpr parenthesized="false">
                            <ExprLit>
                              <Token type="LIT_INT_DEC" val="4" start="26:42" end="26:43" />
                            </ExprLit>
                          </StmtExpr>
                        </slot>
                      </ExprCallArg>
                    </slot>
                  </ExprCall>
                </StmtExpr>
              </slot>
            </ExprCallArg>
          </slot>
        </ExprCall>
      </StmtExpr>
    </Stmt>
  </StmtMain>
</Stmt>
